Subject: [PATCH] Gauge Callbacks code
---
Index: shared/src/commonMain/kotlin/com/example/bingo/BingoSDK.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/shared/src/commonMain/kotlin/com/example/bingo/BingoSDK.kt b/shared/src/commonMain/kotlin/com/example/bingo/BingoSDK.kt
--- a/shared/src/commonMain/kotlin/com/example/bingo/BingoSDK.kt	(revision ff9ccd6ddd0aeda9c1b31f13744ab9b8ba0cc9ef)
+++ b/shared/src/commonMain/kotlin/com/example/bingo/BingoSDK.kt	(date 1763217703324)
@@ -3,7 +3,10 @@
 import com.example.bingo.domain.AddressManager
 import com.example.bingo.data.models.AddAddressResponse
 import com.example.bingo.data.models.ApiResult
+import com.example.bingo.analytics.Analytics
+import com.example.bingo.analytics.NoopAnalytics
 import kotlinx.coroutines.flow.Flow
+import kotlin.concurrent.Volatile
 
 /**
  * Main entry point for the Bingo SDK
@@ -12,12 +15,29 @@
 object BingoSDK {
     
     private val addressManager = AddressManager()
+    @Volatile
+    var analyticsDelegate: Analytics = NoopAnalytics
     
     /**
      * Get the current SDK version
      */
     const val VERSION = "1.0.6"
     
+    /**
+     * Initialize analytics adapter from host app (Android/iOS).
+     * Call once during host app startup.
+     */
+    fun initialize(analytics: Analytics) {
+        analyticsDelegate = analytics
+    }
+    
+    /**
+     * Convenience helper so shared code can emit events without holding the instance.
+     */
+    fun trackEvent(name: String, params: Map<String, String> = emptyMap()) {
+        analyticsDelegate.trackEvent(name, params)
+    }
+    
     /**
      * Validate address data before submission
      * @param address Map containing address fields (street, city, state, zipCode, country)
Index: shared/src/androidMain/kotlin/com/example/bingo/analytics/GaugeAnalyticsAdapter.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/shared/src/androidMain/kotlin/com/example/bingo/analytics/GaugeAnalyticsAdapter.kt b/shared/src/androidMain/kotlin/com/example/bingo/analytics/GaugeAnalyticsAdapter.kt
new file mode 100644
--- /dev/null	(date 1763223040121)
+++ b/shared/src/androidMain/kotlin/com/example/bingo/analytics/GaugeAnalyticsAdapter.kt	(date 1763223040121)
@@ -0,0 +1,38 @@
+package com.example.bingo.analytics
+
+/**
+ * Android-side adapter that forwards analytics calls to host-provided Gauge (or any) implementation.
+ *
+ * This module does NOT import any analytics SDK. The host app passes function delegates
+ * that perform the real tracking using its existing SDKs (Gauge, FullStory, Firebase, etc.).
+ */
+class GaugeAnalyticsAdapter(
+    private val track: (name: String, params: Map<String, String>) -> Unit
+) : Analytics {
+
+    override fun trackEvent(name: String, params: Map<String, String>) {
+        track(name, params)
+    }
+}
+/*
+how to use it in native android:
+
+import android.app.Application
+import com.example.bingo.BingoSDK
+import com.example.bingo.analytics.GaugeAnalyticsAdapter
+
+class App : Application() {
+    override fun onCreate() {
+        super.onCreate()
+
+        val adapter = GaugeAnalyticsAdapter(
+            track = { name, params ->
+                // Replace with your analytics SDK
+                // Example: Gauge.trackEvent(name, params)
+            }
+        )
+
+        BingoSDK.initialize(adapter)
+    }
+}
+*/
Index: shared/src/iosMain/kotlin/com/example/bingo/analytics/GaugeAnalyticsAdapter.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/shared/src/iosMain/kotlin/com/example/bingo/analytics/GaugeAnalyticsAdapter.kt b/shared/src/iosMain/kotlin/com/example/bingo/analytics/GaugeAnalyticsAdapter.kt
new file mode 100644
--- /dev/null	(date 1763223040131)
+++ b/shared/src/iosMain/kotlin/com/example/bingo/analytics/GaugeAnalyticsAdapter.kt	(date 1763223040131)
@@ -0,0 +1,43 @@
+package com.example.bingo.analytics
+
+/**
+ * iOS-side adapter that forwards analytics calls to host-provided Gauge (or any) implementation.
+ *
+ * The host iOS app passes Swift closures to perform the real tracking using its
+ * existing SDKs. Kotlin/Native bridges Map<String, String> to NSDictionary in Swift.
+ */
+class GaugeAnalyticsAdapter(
+    private val track: (name: String, params: Map<String, String>) -> Unit
+) : Analytics {
+
+    override fun trackEvent(name: String, params: Map<String, String>) {
+        track(name, params)
+    }
+}
+
+/*
+how to use it in native ios:
+
+import UIKit
+import BingoSDK // If your framework name differs (e.g. "shared"), import that
+
+@main
+class AppDelegate: UIResponder, UIApplicationDelegate {
+  func application(
+    _ application: UIApplication,
+    didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?
+  ) -> Bool {
+
+    let adapter = GaugeAnalyticsAdapter(
+      track: { name, params in
+        // params is [String: String] bridged from Kotlin Map
+        // Replace with your analytics SDK calls
+        // e.g., Gauge.trackEvent(name, params: params)
+      }
+    )
+
+    BingoSDK.shared.initialize(analytics: adapter)
+    return true
+  }
+}
+*/
Index: shared/src/commonMain/kotlin/com/example/bingo/analytics/Analytics.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/shared/src/commonMain/kotlin/com/example/bingo/analytics/Analytics.kt b/shared/src/commonMain/kotlin/com/example/bingo/analytics/Analytics.kt
new file mode 100644
--- /dev/null	(date 1763216717487)
+++ b/shared/src/commonMain/kotlin/com/example/bingo/analytics/Analytics.kt	(date 1763216717487)
@@ -0,0 +1,20 @@
+package com.example.bingo.analytics
+
+/**
+ * Platform-agnostic analytics contract. Keep your KMP module free of analytics SDKs
+ * and let the host apps (Android/iOS) provide their own implementation.
+ */
+interface Analytics {
+    /**
+     * Track an analytics event with optional key/value parameters.
+     */
+    fun trackEvent(name: String, params: Map<String, String> = emptyMap())
+}
+
+/**
+ * No-op analytics used by default so shared code can safely call tracking
+ * even if the host app didn't initialize analytics yet.
+ */
+object NoopAnalytics : Analytics {
+    override fun trackEvent(name: String, params: Map<String, String>) = Unit
+}
